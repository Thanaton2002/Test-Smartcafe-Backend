# SmartCafe Backend API

REST API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö SmartCafe - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü

## Tech Stack
- **Backend:** Node.js, Express.js, TypeScript
- **Database:** MySQL with Prisma ORM  
- **Validation:** Zod
- **Authentication:** JWT (jsonwebtoken)
- **File Upload:** Multer + Cloudinary
- **Security:** bcryptjs for password hashing

## Features
- üîê User Authentication (Register/Login)
- üìã Menu Management (Create/Read with image upload)
- üõí Order Management (Create/Read/Update)
- üì∏ Image upload to Cloudinary
- üîí JWT-based authentication
- ‚úÖ Request validation with Zod

## API Endpoints

### Authentication
- `POST /api/authen/register` - ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- `POST /api/authen/login` - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

### Menu
- `GET /api/menu/` - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `POST /api/menu/` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πâ‡∏≠‡∏á login)

### Order
- `POST /api/order/` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà
- `GET /api/order/:orderId` - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
- `PATCH /api/order/:orderId` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå

## Installation & Setup

### Steps
1. Clone repository
```bash
git clone https://github.com/Thanaton2002/Test-Smartcafe-Backend.git
cd Test-Smartcafe-Backend
```

2. Install dependencies
```bash
pnpm install
```

3. Database setup
```bash
# Generate Prisma client
pnpm prisma generate

# Run database migration
pnpm prisma migrate dev --name init
```

4. Run development server
```bash
pnpm dev
```

Server ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:7777`

## Environment Variables
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå root ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

```env
# Database
DATABASE_URL="mysql://username:password@localhost:3306/smartcafe_db"

# JWT
JWT_SECRET="your_jwt_secret_key"
JWT_EXPIRES_IN="7d"

# Cloudinary
CLOUDINARY_NAME="your_cloudinary_name"
CLOUDINARY_API_KEY="your_api_key"
CLOUDINARY_API_SECRET="your_api_secret"

# App
PORT=7777
```

## Database Schema
- **User:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (username, password)
- **Menu:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π (name, price, image)
- **Order & OrderItem:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

## Scripts
- `pnpm dev` - Run development server with nodemon
- `pnpm prisma studio` - Open Prisma Studio
- `pnpm prisma migrate dev` - Run database migration
- `pnpm prisma generate` - Generate Prisma client